import{defineProperty as t}from"../../_virtual/_rollupPluginBabelHelpers.min.mjs";import{Intersection as i}from"../Intersection.min.mjs";import{Point as s}from"../Point.min.mjs";import{SCALE as r}from"../constants.min.mjs";import{multiplyTransformMatrixArray as e,createTranslateMatrix as o,createRotateMatrix as n,createScaleMatrix as l}from"../util/misc/matrix.min.mjs";import{renderSquareControl as a,renderCircleControl as h}from"./controlRendering.min.mjs";class c{constructor(i){t(this,"visible",!0),t(this,"disabled",!1),t(this,"actionName",r),t(this,"angle",0),t(this,"x",0),t(this,"y",0),t(this,"offsetX",0),t(this,"offsetY",0),t(this,"sizeX",0),t(this,"sizeY",0),t(this,"touchSizeX",0),t(this,"touchSizeY",0),t(this,"cursorStyle","crosshair"),t(this,"withConnection",!1),Object.assign(this,i)}shouldActivate(t,s,r,e){var o;let{tl:n,tr:l,br:a,bl:h}=e;return(null===(o=s.canvas)||void 0===o?void 0:o.getActiveObject())===s&&s.isControlVisible(t)&&i.isPointInPolygon(r,[n,l,a,h])}getActionHandler(t,i,s){return this.actionHandler}getMouseDownHandler(t,i,s){return this.mouseDownHandler}getMouseUpHandler(t,i,s){return this.mouseUpHandler}cursorStyleHandler(t,i,s){return i.cursorStyle}getActionName(t,i,s){return i.actionName}getVisibility(t,i){var s,r;return null!==(s=null===(r=t._controlsVisibility)||void 0===r?void 0:r[i])&&void 0!==s?s:this.visible}setVisibility(t,i,s){this.visible=t}positionHandler(t,i,r,e){return new s(this.x*t.x+this.offsetX,this.y*t.y+this.offsetY).transform(i)}calcCornerCoords(t,i,r,a,h,c){const m=e([o(r,a),n({angle:t}),l((h?this.touchSizeX:this.sizeX)||i,(h?this.touchSizeY:this.sizeY)||i)]);return{tl:new s(-.5,-.5).transform(m),tr:new s(.5,-.5).transform(m),br:new s(.5,.5).transform(m),bl:new s(-.5,.5).transform(m)}}render(t,i,s,r,e){if("circle"===((r=r||{}).cornerStyle||e.cornerStyle))h.call(this,t,i,s,r,e);else a.call(this,t,i,s,r,e)}}export{c as Control};
//# sourceMappingURL=Control.min.mjs.map
