import{defineProperty as t,objectSpread2 as e,objectWithoutProperties as i}from"../../_virtual/_rollupPluginBabelHelpers.min.mjs";import{kRect as r}from"../constants.min.mjs";import{SHARED_ATTRIBUTES as s}from"../parser/attributes.min.mjs";import{parseAttributes as o}from"../parser/parseAttributes.min.mjs";import{classRegistry as n}from"../ClassRegistry.min.mjs";import{FabricObject as h}from"./Object/FabricObject.min.mjs";import{cacheProperties as c}from"./Object/defaultValues.min.mjs";const a=["left","top","width","height","visible"],m={uniformRoundness:!1,rx:0,ry:0},l=["rx","ry"];class u extends h{static getDefaults(){return e(e({},super.getDefaults()),u.ownDefaults)}constructor(t){super(),Object.assign(this,u.ownDefaults),this.setOptions(t),this._initRxRy()}_initRxRy(){const{rx:t,ry:e}=this;t&&!e?this.ry=t:e&&!t&&(this.rx=e)}_render(t){const{width:e,height:i}=this,s=-e/2,o=-i/2;let n=this.rx?this.rx:0,h=this.ry?this.ry:0;const c=0!==n||0!==h;if(this.uniformRoundness){const t=this.getObjectScaling();n/=t.x,h/=t.y}n=Math.min(n,e/2),h=Math.min(h,i/2),t.beginPath(),t.moveTo(s+n,o),t.lineTo(s+e-n,o),c&&t.bezierCurveTo(s+e-r*n,o,s+e,o+r*h,s+e,o+h),t.lineTo(s+e,o+i-h),c&&t.bezierCurveTo(s+e,o+i-r*h,s+e-r*n,o+i,s+e-n,o+i),t.lineTo(s+n,o+i),c&&t.bezierCurveTo(s+r*n,o+i,s,o+i-r*h,s,o+i-h),t.lineTo(s,o+h),c&&t.bezierCurveTo(s,o+r*h,s+r*n,o,s+n,o),t.closePath(),this._renderPaintInOrder(t)}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject([...l,...t])}_toSVG(){const{width:t,height:e,rx:i,ry:r}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-t/2,'" y="').concat(-e/2,'" rx="').concat(i,'" ry="').concat(r,'" width="').concat(t,'" height="').concat(e,'" />\n')]}static async fromElement(t,r,s){const n=o(t,this.ATTRIBUTE_NAMES,s),{left:h=0,top:c=0,width:m=0,height:l=0,visible:u=!0}=n,p=i(n,a);return new this(e(e(e({},r),p),{},{left:h,top:c,width:m,height:l,visible:Boolean(u&&m&&l)}))}}t(u,"type","Rect"),t(u,"cacheProperties",[...c,...l]),t(u,"ownDefaults",m),t(u,"ATTRIBUTE_NAMES",[...s,"x","y","rx","ry","width","height"]),n.setClass(u),n.setSVGClass(u);export{u as Rect,m as rectDefaultValues};
//# sourceMappingURL=Rect.min.mjs.map
