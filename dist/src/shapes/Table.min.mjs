import{defineProperty as t}from"../../_virtual/_rollupPluginBabelHelpers.min.mjs";import{Group as e}from"./Group.min.mjs";import{classRegistry as s}from"../ClassRegistry.min.mjs";class i extends e{constructor(){super(...arguments),t(this,"rows",0),t(this,"columns",0),t(this,"layoutType",""),t(this,"alternateBackgroundColor1",null),t(this,"alternateBackgroundColor2",null),t(this,"highlightedRowsBackgroundColor",null),t(this,"highlightedRows",[]),t(this,"tableArray",[[]]),t(this,"ySpacing",0),t(this,"xSpacing",0),t(this,"hasButton",!0)}renderTableBorders(t){this.stroke&&0!==this.strokeWidth&&(t.save(),this._setStrokeStyles(t,this),t.strokeRect(-this.width/2,-this.height/2,this.width,this.height),this.isTableLayout()&&(this.drawColumnBorders(t),this.drawRowBorders(t)),t.restore())}isTable(){return!0}renderTableCustomBackground(t){if(0==this.highlightedRows.length&&(!this.alternateBackgroundColor1||!this.alternateBackgroundColor2)||!this.isTableLayout())return void this.renderGroupBackground(t);const e=this.getTableBackGroundData();t.save();const s=this.getObjects();let i=null,o=null,r=!1;for(let h=0;h<e.length;h++)if(r=!1,"none"!=e[h]){if(null==i&&(i=0==h?-this.height/2:s[h].top-this.ySpacing/2),e[h]!=e[h+1])switch(o=Math.abs(i-s[h].top)+this.getHeightOfRow(h)+this.ySpacing/2,r=!0,e[h]){case"highlight":t.fillStyle=this.highlightedRowsBackgroundColor;break;case"color":t.fillStyle=this.backgroundColor;break;case"alternate1":t.fillStyle=this.alternateBackgroundColor1;break;case"alternate2":t.fillStyle=this.alternateBackgroundColor2}else r=!1;var l;if(r)t.fillRect(-this.width/2,i,this.width,null!==(l=o)&&void 0!==l?l:0),i=null,o=null}t.restore()}getTableBackGroundData(){const t=[];for(let e=0;e<this.rows;e++)-1!=this.highlightedRows.indexOf(e)?t.push("highlight"):null!=this.backgroundColor?t.push("color"):this.alternateBackgroundColor1&&this.alternateBackgroundColor2?e%2==0?t.push("alternate1"):t.push("alternate2"):t.push("none");return t}getHeightOfRow(t){let e,s=0;for(let i=0;i<this.columns;i++)e=this.tableArray[i][t].calcTextHeight(),e>s&&(s=e);return s}getWidthOfColumn(t){let e,s=0;for(let i=0;i<this.rows;i++)e=this.tableArray[t][i].calcTextWidth(),e>s&&(s=e);return s}drawColumnBorders(t){const e=this.getObjects();let s,i,o,r=this.rows;for(let l=2;l<=this.columns;l++){for(s=0;e[r]&&e[r].column==l;)i=e[r].width,i>s&&(s=i,o=r),r++;o&&(t.beginPath(),t.moveTo(e[o].left-this.xSpacing/2,-this.height/2),t.lineTo(e[o].left-this.xSpacing/2,-this.height/2+this.height),t.stroke())}}drawRowBorders(t){const e=this.getObjects();for(let s=1;s<this.rows;s++){const i=-this.width/2,o=e[s].top-this.ySpacing/2,r=i+this.width,l=o;t.beginPath(),t.moveTo(i,o),t.lineTo(r,l),t.stroke()}}isTableLayout(){return"layout-1"==this.layoutType||"custom-table"==this.layoutType}}t(i,"type","table"),s.setClass(i),s.setClass(i,"table");export{i as Table};
//# sourceMappingURL=Table.min.mjs.map
